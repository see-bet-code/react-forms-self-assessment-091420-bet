{"ast":null,"code":"'use strict';\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _glob = require('glob-to-regexp');\n\nvar _express = require('path-to-regexp');\n\nvar stringMatchers = {\n  begin: function begin(targetString) {\n    return function (url) {\n      return url.indexOf(targetString) === 0;\n    };\n  },\n  end: function end(targetString) {\n    return function (url) {\n      return url.substr(-targetString.length) === targetString;\n    };\n  },\n  glob: function glob(targetString) {\n    var urlRX = _glob(targetString.replace(/^glob:/, ''));\n\n    return function (url) {\n      return urlRX.test(url);\n    };\n  },\n  express: function express(targetString) {\n    var urlRX = _express(targetString.replace(/^express:/, ''));\n\n    return function (url) {\n      return urlRX.test(url);\n    };\n  }\n};\n\nfunction getHeaderMatcher(expectedHeaders, HeadersConstructor) {\n  var expectation = Object.keys(expectedHeaders).map(function (k) {\n    return {\n      key: k.toLowerCase(),\n      val: expectedHeaders[k]\n    };\n  });\n  return function (headers) {\n    if (!headers) {\n      headers = {};\n    }\n\n    if (headers instanceof HeadersConstructor) {\n      headers = headers.raw();\n    }\n\n    var lowerCaseHeaders = Object.keys(headers).reduce(function (obj, k) {\n      obj[k.toLowerCase()] = headers[k];\n      return obj;\n    }, {});\n    return expectation.every(function (header) {\n      return areHeadersEqual(lowerCaseHeaders, header);\n    });\n  };\n}\n\nfunction areHeadersEqual(currentHeader, expectedHeader) {\n  var key = expectedHeader.key;\n  var val = expectedHeader.val;\n  var currentHeaderValue = Array.isArray(currentHeader[key]) ? currentHeader[key] : [currentHeader[key]];\n  var expectedHeaderValue = Array.isArray(val) ? val : [val];\n\n  if (currentHeaderValue.length !== expectedHeaderValue.length) {\n    return false;\n  }\n\n  for (var i = 0; i < currentHeaderValue.length; ++i) {\n    if (currentHeaderValue[i] !== expectedHeaderValue[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction normalizeRequest(url, options, Request) {\n  if (Request.prototype.isPrototypeOf(url)) {\n    return {\n      url: url.url,\n      method: url.method,\n      headers: function () {\n        var headers = {};\n        url.headers.forEach(function (name) {\n          return headers[name] = url.headers.name;\n        });\n        return headers;\n      }()\n    };\n  } else {\n    return {\n      url: url,\n      method: options && options.method || 'GET',\n      headers: options && options.headers\n    };\n  }\n}\n\nmodule.exports = function (route, Request, HeadersConstructor) {\n  route = _extends({}, route);\n\n  if (typeof route.response === 'undefined') {\n    throw new Error('Each route must define a response');\n  }\n\n  if (!route.matcher) {\n    throw new Error('each route must specify a string, regex or function to match calls to fetch');\n  }\n\n  if (!route.name) {\n    route.name = route.matcher.toString();\n    route.__unnamed = true;\n  }\n\n  var matchUrl = void 0;\n  var expectedMethod = route.method && route.method.toLowerCase();\n\n  function matchMethod(method) {\n    return !expectedMethod || expectedMethod === (method ? method.toLowerCase() : 'get');\n  }\n\n  ;\n  var matchHeaders = route.headers ? getHeaderMatcher(route.headers, HeadersConstructor) : function () {\n    return true;\n  };\n\n  if (typeof route.matcher === 'function') {\n    matchUrl = route.matcher;\n  } else if (typeof route.matcher === 'string') {\n    Object.keys(stringMatchers).some(function (name) {\n      if (route.matcher.indexOf(name + ':') === 0) {\n        var url = route.matcher.replace(new RegExp('^' + name + ':'), '');\n        matchUrl = stringMatchers[name](url);\n        return true;\n      }\n    });\n\n    if (!matchUrl) {\n      if (route.matcher === '*') {\n        matchUrl = function matchUrl() {\n          return true;\n        };\n      } else if (route.matcher.indexOf('^') === 0) {\n        (function () {\n          console.warn('Using \\'^\\' to denote the start of a url is deprecated. Use \\'begin:\\' instead');\n          var expectedUrl = route.matcher.substr(1);\n\n          matchUrl = function matchUrl(url) {\n            return url.indexOf(expectedUrl) === 0;\n          };\n        })();\n      } else {\n        (function () {\n          var expectedUrl = route.matcher;\n\n          matchUrl = function matchUrl(url) {\n            return url === expectedUrl;\n          };\n        })();\n      }\n    }\n  } else if (route.matcher instanceof RegExp) {\n    (function () {\n      var urlRX = route.matcher;\n\n      matchUrl = function matchUrl(url) {\n        return urlRX.test(url);\n      };\n    })();\n  }\n\n  var matcher = function matcher(url, options) {\n    var req = normalizeRequest(url, options, Request);\n    return matchHeaders(req.headers) && matchMethod(req.method) && matchUrl(req.url, options);\n  };\n\n  if (route.times) {\n    (function () {\n      var timesLeft = route.times;\n\n      route.matcher = function (url, options) {\n        var match = timesLeft && matcher(url, options);\n\n        if (match) {\n          timesLeft--;\n          return true;\n        }\n      };\n\n      route.reset = function () {\n        return timesLeft = route.times;\n      };\n    })();\n  } else {\n    route.matcher = matcher;\n  }\n\n  return route;\n};","map":{"version":3,"sources":["/Users/Heather/Flatiron/code/Phase4/react-forms-self-assessment-091420-bet/node_modules/fetch-mock/es5/compile-route.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_glob","require","_express","stringMatchers","begin","targetString","url","indexOf","end","substr","glob","urlRX","replace","test","express","getHeaderMatcher","expectedHeaders","HeadersConstructor","expectation","keys","map","k","toLowerCase","val","headers","raw","lowerCaseHeaders","reduce","obj","every","header","areHeadersEqual","currentHeader","expectedHeader","currentHeaderValue","Array","isArray","expectedHeaderValue","normalizeRequest","options","Request","isPrototypeOf","method","forEach","name","module","exports","route","response","Error","matcher","toString","__unnamed","matchUrl","expectedMethod","matchMethod","matchHeaders","some","RegExp","console","warn","expectedUrl","req","times","timesLeft","match","reset"],"mappings":"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","sourcesContent":["'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _glob = require('glob-to-regexp');\nvar _express = require('path-to-regexp');\n\nvar stringMatchers = {\n\tbegin: function begin(targetString) {\n\t\treturn function (url) {\n\t\t\treturn url.indexOf(targetString) === 0;\n\t\t};\n\t},\n\tend: function end(targetString) {\n\t\treturn function (url) {\n\t\t\treturn url.substr(-targetString.length) === targetString;\n\t\t};\n\t},\n\tglob: function glob(targetString) {\n\t\tvar urlRX = _glob(targetString.replace(/^glob:/, ''));\n\t\treturn function (url) {\n\t\t\treturn urlRX.test(url);\n\t\t};\n\t},\n\texpress: function express(targetString) {\n\t\tvar urlRX = _express(targetString.replace(/^express:/, ''));\n\t\treturn function (url) {\n\t\t\treturn urlRX.test(url);\n\t\t};\n\t}\n};\n\nfunction getHeaderMatcher(expectedHeaders, HeadersConstructor) {\n\tvar expectation = Object.keys(expectedHeaders).map(function (k) {\n\t\treturn { key: k.toLowerCase(), val: expectedHeaders[k] };\n\t});\n\treturn function (headers) {\n\t\tif (!headers) {\n\t\t\theaders = {};\n\t\t}\n\n\t\tif (headers instanceof HeadersConstructor) {\n\t\t\theaders = headers.raw();\n\t\t}\n\n\t\tvar lowerCaseHeaders = Object.keys(headers).reduce(function (obj, k) {\n\t\t\tobj[k.toLowerCase()] = headers[k];\n\t\t\treturn obj;\n\t\t}, {});\n\n\t\treturn expectation.every(function (header) {\n\t\t\treturn areHeadersEqual(lowerCaseHeaders, header);\n\t\t});\n\t};\n}\n\nfunction areHeadersEqual(currentHeader, expectedHeader) {\n\tvar key = expectedHeader.key;\n\tvar val = expectedHeader.val;\n\tvar currentHeaderValue = Array.isArray(currentHeader[key]) ? currentHeader[key] : [currentHeader[key]];\n\tvar expectedHeaderValue = Array.isArray(val) ? val : [val];\n\n\tif (currentHeaderValue.length !== expectedHeaderValue.length) {\n\t\treturn false;\n\t}\n\n\tfor (var i = 0; i < currentHeaderValue.length; ++i) {\n\t\tif (currentHeaderValue[i] !== expectedHeaderValue[i]) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nfunction normalizeRequest(url, options, Request) {\n\tif (Request.prototype.isPrototypeOf(url)) {\n\t\treturn {\n\t\t\turl: url.url,\n\t\t\tmethod: url.method,\n\t\t\theaders: function () {\n\t\t\t\tvar headers = {};\n\t\t\t\turl.headers.forEach(function (name) {\n\t\t\t\t\treturn headers[name] = url.headers.name;\n\t\t\t\t});\n\t\t\t\treturn headers;\n\t\t\t}()\n\t\t};\n\t} else {\n\t\treturn {\n\t\t\turl: url,\n\t\t\tmethod: options && options.method || 'GET',\n\t\t\theaders: options && options.headers\n\t\t};\n\t}\n}\n\nmodule.exports = function (route, Request, HeadersConstructor) {\n\troute = _extends({}, route);\n\n\tif (typeof route.response === 'undefined') {\n\t\tthrow new Error('Each route must define a response');\n\t}\n\n\tif (!route.matcher) {\n\t\tthrow new Error('each route must specify a string, regex or function to match calls to fetch');\n\t}\n\n\tif (!route.name) {\n\t\troute.name = route.matcher.toString();\n\t\troute.__unnamed = true;\n\t}\n\n\tvar matchUrl = void 0;\n\n\tvar expectedMethod = route.method && route.method.toLowerCase();\n\n\tfunction matchMethod(method) {\n\t\treturn !expectedMethod || expectedMethod === (method ? method.toLowerCase() : 'get');\n\t};\n\n\tvar matchHeaders = route.headers ? getHeaderMatcher(route.headers, HeadersConstructor) : function () {\n\t\treturn true;\n\t};\n\n\tif (typeof route.matcher === 'function') {\n\t\tmatchUrl = route.matcher;\n\t} else if (typeof route.matcher === 'string') {\n\n\t\tObject.keys(stringMatchers).some(function (name) {\n\t\t\tif (route.matcher.indexOf(name + ':') === 0) {\n\t\t\t\tvar url = route.matcher.replace(new RegExp('^' + name + ':'), '');\n\t\t\t\tmatchUrl = stringMatchers[name](url);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t\tif (!matchUrl) {\n\t\t\tif (route.matcher === '*') {\n\t\t\t\tmatchUrl = function matchUrl() {\n\t\t\t\t\treturn true;\n\t\t\t\t};\n\t\t\t} else if (route.matcher.indexOf('^') === 0) {\n\t\t\t\t(function () {\n\t\t\t\t\tconsole.warn('Using \\'^\\' to denote the start of a url is deprecated. Use \\'begin:\\' instead');\n\t\t\t\t\tvar expectedUrl = route.matcher.substr(1);\n\t\t\t\t\tmatchUrl = function matchUrl(url) {\n\t\t\t\t\t\treturn url.indexOf(expectedUrl) === 0;\n\t\t\t\t\t};\n\t\t\t\t})();\n\t\t\t} else {\n\t\t\t\t(function () {\n\t\t\t\t\tvar expectedUrl = route.matcher;\n\t\t\t\t\tmatchUrl = function matchUrl(url) {\n\t\t\t\t\t\treturn url === expectedUrl;\n\t\t\t\t\t};\n\t\t\t\t})();\n\t\t\t}\n\t\t}\n\t} else if (route.matcher instanceof RegExp) {\n\t\t(function () {\n\t\t\tvar urlRX = route.matcher;\n\t\t\tmatchUrl = function matchUrl(url) {\n\t\t\t\treturn urlRX.test(url);\n\t\t\t};\n\t\t})();\n\t}\n\n\tvar matcher = function matcher(url, options) {\n\t\tvar req = normalizeRequest(url, options, Request);\n\t\treturn matchHeaders(req.headers) && matchMethod(req.method) && matchUrl(req.url, options);\n\t};\n\n\tif (route.times) {\n\t\t(function () {\n\t\t\tvar timesLeft = route.times;\n\t\t\troute.matcher = function (url, options) {\n\t\t\t\tvar match = timesLeft && matcher(url, options);\n\t\t\t\tif (match) {\n\t\t\t\t\ttimesLeft--;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t};\n\t\t\troute.reset = function () {\n\t\t\t\treturn timesLeft = route.times;\n\t\t\t};\n\t\t})();\n\t} else {\n\t\troute.matcher = matcher;\n\t}\n\n\treturn route;\n};"]},"metadata":{},"sourceType":"script"}